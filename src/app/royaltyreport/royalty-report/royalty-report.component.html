
<div class="container entry-form">     
    <div class="row" style="width: 100%;">
        <div class="col entry-form-col">
            <div class="row">
              <div class="col-md-12 title">
                <h1 class="page-title">Royalty Payout Report</h1> 
              </div>
            </div>
            <div class="form-group row">
              <div class="col-md-4 field-label-div">
                <label class="col-form-label">Payout Date</label>
              </div>
              <div class="col-md-8 field-value-div">
                <select class="form-control form-control-sm" (change)="onPayoutDateChanged($event)">
                  <option [value]="null" hidden>Select Payout Date</option>
                  <option *ngFor="let payoutDate of payoutDates" value={{payoutDate}} > 
                    {{payoutDate | date: "dd MMM yyyy"}}
                  </option>
                </select>
              </div>
            </div>   
            <div class="row-table">
                <div class="col-table table-responsive-md">
                  <table class="table">
                    <thead>
                      <th>Student</th>
                      <th>Date of Admission</th>
                      <th>Payout Date</th>
                      <th></th>
                    </thead>
                    <tbody>
                      <tr *ngFor="let rd of royaltyDistributions; let i = index"  >
                        <td>{{rd.firstName}} {{rd.lastName}}</td>                        
                        <td>{{rd.dateOfAdmission | date: "dd MMM yyyy"}}</td>
                        <td>{{rd.payoutDate | date: "dd MMM yyyy"}}</td>
                        <td>
                          <button class="btn btn-light referral-button" (click)="showReferrals(referrals)">Show referrrals</button>
                        </td>
                        <ng-template #referrals>
                          <div class="row-table">
                            <div class="col-table" style="display:flex;flex-direction: row;padding: 5px 5px;">
                                <div class="col-md-6" style="padding-left: 0px;">
                                  <div>
                                    <label class="student-label">Student</label>
                                  </div>
                                  <div>
                                    <label>{{rd.firstName}} {{rd.lastName}}</label>
                                  </div>
                                </div>
                                <div class="col-md-6" style="padding-left: 0px;">
                                  <div>
                                    <label class="student-label">Date of Admission</label>
                                  </div>
                                  <div>
                                    <label>{{rd.dateOfAdmission | date: "dd MMM yyyy"}}</label>
                                  </div>
                                </div>
                              </div>
                          </div>
                          <div class="row-table">
                            <div class="col-table">
                              <table class="table">
                                <thead>
                                  <th>Level</th>
                                  <th>Referral</th>
                                  <th>Royalty Amount</th>                              
                                </thead>
                                <tbody>
                                  <tr *ngFor="let rdd of rd.royaltyDistributionDetails; let i = index"  >
                                    <td>{{i + 1}}</td>
                                    <td>{{ rdd.firstName }} {{ rdd.lastName }}</td>
                                    <td>Rs. {{ rdd.royaltyAmount }}</td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </ng-template>
                      </tr>
                    </tbody>
                  </table>
                </div>
            </div>
            <div class="row">
                <div class="col print-button">
                    <button class="btn btn-success" type="button" (click)="print()">Print</button>
                </div>
            </div>
        </div>
    </div>
</div>
<app-content-dialog></app-content-dialog>